webpackJsonp([6],{"364z":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("dXTw");var a={data:function(){return{dialogVisible:!1,categoryForm:{categoryName:""},categoryRules:{categoryName:[{required:!0,message:"请输入分类名称",trigger:"blur"}]}}},methods:{open:function(){this.dialogVisible=!0},submitAdd:function(){var t=this;this.dialogVisible=!this.dialogVisible,this.$refs.categoryForm.validate(function(e){if(!e)return console.log("error submit!"),!1;t.$emit("addSeries",t.categoryForm)})}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{"append-to-body":"",visible:t.dialogVisible,title:"添加产品分类"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"categoryForm",attrs:{model:t.categoryForm,rules:t.categoryRules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"分类名称",prop:"categoryName"}},[i("el-input",{attrs:{placeholder:"分类名称"},model:{value:t.categoryForm.categoryName,callback:function(e){t.$set(t.categoryForm,"categoryName",e)},expression:"categoryForm.categoryName"}})],1)],1),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.dialogVisible=!t.dialogVisible}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.submitAdd}},[t._v("确定")])],1)],1)},staticRenderFns:[]},r=i("VU/8")(a,o,!1,null,null,null).exports,l={data:function(){return{dialogVisible:!1,productForm:{productName:"",productParams:[],addParams:"",productParamsObj:[]},productRules:{productName:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},productParamsOptions:[{label:"号码",value:"size"},{label:"长度",value:"length"},{label:"适用范围",value:"range"},{label:"容量",value:"amount"},{label:"净含量",value:"netWt"}]}},methods:{open:function(){this.dialogVisible=!0},submitAdd:function(){var t=this;this.$refs.productForm.validate(function(e){if(!e)return console.log("error submit!"),!1;t.dialogVisible=!t.dialogVisible,t.$emit("addProduct",t.productForm)})},confirmAddParams:function(){var t=this.productParamsOptions.length;this.$set(this.productParamsOptions,t,{label:this.productForm.addParams,value:"value"+new Date});var e=this.productForm.productParams.length;this.$set(this.productForm.productParams,e,this.productForm.addParams),this.productForm.addParams="",this.handleChange(this.productForm.productParams)},handleChange:function(t){var e=this;this.productForm.productParamsObj=[],t.forEach(function(t){var i=_.findIndex(e.productParamsOptions,function(e){return e.label==t});e.productForm.productParamsObj.push({label:t,value:e.productParamsOptions[i].value})})}},watch:{productForm:function(t){this.productForm=t}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{"append-to-body":"",visible:t.dialogVisible,title:"添加产品","custom-class":"add-product"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"productForm",attrs:{model:t.productForm,rules:t.productRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"产品名称：",prop:"productName"}},[i("el-input",{attrs:{placeholder:"请输入产品名称"},model:{value:t.productForm.productName,callback:function(e){t.$set(t.productForm,"productName",e)},expression:"productForm.productName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"产品参数：",prop:"productParams"}},[i("el-checkbox-group",{on:{change:t.handleChange},model:{value:t.productForm.productParams,callback:function(e){t.$set(t.productForm,"productParams",e)},expression:"productForm.productParams"}},t._l(t.productParamsOptions,function(t){return i("el-checkbox",{key:t.value,attrs:{label:t.label}})}),1),t._v(" "),i("span",[t._v("其他")]),t._v(" "),i("el-input",{staticStyle:{width:"auto"},attrs:{placeholder:"请输入参数名称"},model:{value:t.productForm.addParams,callback:function(e){t.$set(t.productForm,"addParams",e)},expression:"productForm.addParams"}}),t._v(" "),i("el-button",{attrs:{type:"text"},on:{click:t.confirmAddParams}},[t._v("确定")])],1),t._v(" "),0!==t.productForm.productParamsObj.length?i("div",{staticClass:"tip-info"},[t._v("注意：如果多个值用逗号隔开，例如 (S,M,L)")]):t._e(),t._v(" "),t._l(t.productForm.productParamsObj,function(e,a){return i("el-form-item",{key:a,attrs:{label:e.label}},[i("el-input",{attrs:{placeholder:"请输入对应值"},model:{value:t.productForm[e.value],callback:function(i){t.$set(t.productForm,e.value,i)},expression:"productForm[item.value]"}})],1)})],2),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.dialogVisible=!t.dialogVisible}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.submitAdd}},[t._v("确定")])],1)],1)},staticRenderFns:[]};var s=i("VU/8")(l,n,!1,function(t){i("vBmB")},null,null).exports,c={data:function(){return{dialogVisible:!1,multiple:[],rightVal:[],selectedCol:[],rightSelect:[],childTest:[]}},props:{value:{type:Array},colOption:{type:Array,default:[]}},methods:{open:function(){this.dialogVisible=!0},setCol:function(){this.dialogVisible=!1,this.$emit("input",this.selectedCol)},removeUp:function(){console.log("上移")},removeDown:function(){console.log("下移")},rightCheckChange:function(t){this.rightSelect=t}},watch:{value:function(t){this.selectedCol=t}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{"append-to-body":"",visible:t.dialogVisible,"custom-class":"set-thead",title:"设置表头"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"content"},[i("el-transfer",{staticClass:"height-fixed",attrs:{titles:["显示字段","隐藏字段"],data:t.colOption,format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},"target-order":"original"},on:{"right-check-change":t.rightCheckChange},model:{value:t.selectedCol,callback:function(e){t.selectedCol=e},expression:"selectedCol"}})],1),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.dialogVisible=!t.dialogVisible}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.setCol}},[t._v("确定")])],1)])},staticRenderFns:[]},u=i("VU/8")(c,d,!1,null,null,null).exports,p={components:{MyTable:function(){return i.e(18).then(i.bind(null,"JE0o"))}},data:function(){return{dialogVisible:!1,tableCol:[{prop:"size",label:"号码",align:"center"},{prop:"range",label:"适用范围",align:"center"},{prop:"amount",label:"包容量(/包)",align:"center"},{prop:"stocks",label:"库存(包)",align:"center"}],tableData:[],productName:"",totalStock:0}},methods:{open:function(t){var e=this;this.dialogVisible=!0,this.productName=t.series,this.tableData=t.specifications,this.totalStock=0,t.specifications.forEach(function(t){e.totalStock+=Number(t.stocks)})}}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{"append-to-body":"",visible:t.dialogVisible,title:"规格及库存","custom-class":"specifications-stock"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"content"},[i("div",{staticClass:"productName"},[t._v(t._s(t.productName))]),t._v(" "),i("my-table",{attrs:{col:t.tableCol,data:t.tableData,border:"",stripe:""}}),t._v(" "),i("div",{staticClass:"totalStock"},[t._v("总库存量："),i("span",{staticClass:"red"},[t._v(t._s(t.totalStock)+" 包")])])],1),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.dialogVisible=!t.dialogVisible}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!t.dialogVisible}}},[t._v("确定")])],1)])},staticRenderFns:[]};var b=i("VU/8")(p,m,!1,function(t){i("IpE/")},null,null).exports,f=[{key:1,label:"系列",prop:"series",align:"left",width:"200",disabled:!0},{key:2,label:"箱容量",prop:"boxCapacity",align:"center",width:"200",disabled:!0},{key:3,label:"零售(元)",prop:"retailPrice",align:"center"},{key:4,label:"铺货(元)",prop:"distributionPrice",align:"center"},{key:5,label:"首席(元)",prop:"chiefPrice",align:"center"},{key:6,label:"总代(元)",prop:"rosePrice",align:"center"},{key:7,label:"一级(元)",prop:"beginPrice",align:"center"},{key:8,label:"VIP(元)",prop:"vipPrice",align:"center"},{key:9,label:"会员(元)",prop:"memberPrice",align:"center"}],h=i("vgQg"),v={name:"SelfList",components:{WhiteBox:function(){return i.e(19).then(i.bind(null,"De+3"))},TreeTable:function(){return i.e(20).then(i.bind(null,"IyuO"))},MyTable:function(){return i.e(18).then(i.bind(null,"JE0o"))},AddCategory:r,AddProduct:s,SetThead:u,SpecificationsStock:b},data:function(){return{columns:f,tableData:[],productSeries:h.a,type:"add",currRow:null,seriesName:"",dialog:{title:"",visible:!1},tableCol:_.cloneDeep(f),transferRightVal:[],activeName:"diapers"}},created:function(){this.formatData(this.productSeries,this.tableData)},methods:{openDialog:function(t,e){this.$refs[t].open(e)},formatData:function(t,e,i){var a=this;t.forEach(function(t,i){e.push({series:t.label,value:t.value,specifications:t.specifications,boxCapacity:t.boxCapacity,retailPrice:t.retailPrice,distributionPrice:t.distributionPrice,chiefPrice:t.chiefPrice,rosePrice:t.rosePrice,beginPrice:t.beginPrice,vipPrice:t.vipPrice,memberPrice:t.memberPrice,children:[]}),t.children&&t.children.length&&a.formatData(t.children,e[i].children,t)})},formatThead:function(){var t=_.cloneDeep(this.columns);this.transferRightVal.forEach(function(e){var i=_.findIndex(t,function(t){return t.key===e});i>-1&&t.splice(i,1)}),this.tableCol=t},editMemberLevel:function(t){this.type="edit",this.currRow=t,this.seriesName=t.memberLevel,this.dialog.visible=!0,this.dialog.title="修改"},delMemberLevel:function(t,e){if(t.children){var i=t.children.length;this.$refs.treeTable.delete(e,i+1)}else this.$refs.treeTable.delete(e,1)},addSeries:function(t){this.tableData.push({series:t.categoryName,specifications:[],children:[]}),console.log(this.tableData),console.log(this.productSeries)},addProduct:function(t){console.log(t)}},watch:{transferRightVal:function(t){this.formatThead()},tableCol:function(t){this.tableCol=t}}},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"product-category"},[i("white-box",{attrs:{width:"100%",title:"产品分类"}},[i("template",{slot:"content"},[i("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("div",{staticClass:"buttons"},[i("div",{staticClass:"fr"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.openDialog("addCategory")}}},[t._v("增加产品分类")]),t._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(e){return t.openDialog("addProduct",t.activeName)}}},[t._v("增加产品")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini",icon:"icon-shezhi"},on:{click:function(e){return t.openDialog("setThead")}}},[t._v("设置表头")])],1)]),t._v(" "),t._l(t.tableData,function(e,a){return i("el-tab-pane",{key:a,attrs:{label:e.series,name:e.value}},[i("my-table",{attrs:{col:t.tableCol,data:t.tableData[a].children,stripe:"",operation:"",operationAlign:"center",operationWidth:"200"},scopedSlots:t._u([{key:"operation",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.openDialog("specificationsStock",e.row)}}},[t._v("规格及库存")]),t._v(" "),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.editMemberLevel(e.row)}}},[t._v("修改")])]}}])})],1)})],2)],1)],2),t._v(" "),i("div",{staticClass:"dialogs"},[i("add-category",{ref:"addCategory",on:{addSeries:t.addSeries}}),t._v(" "),i("add-product",{ref:"addProduct",on:{addProduct:t.addProduct}}),t._v(" "),i("set-thead",{ref:"setThead",attrs:{"col-option":t.columns},model:{value:t.transferRightVal,callback:function(e){t.transferRightVal=e},expression:"transferRightVal"}}),t._v(" "),i("specifications-stock",{ref:"specificationsStock"})],1)],1)},staticRenderFns:[]},y=i("VU/8")(v,g,!1,null,null,null);e.default=y.exports},"IpE/":function(t,e){},dXTw:function(t,e){},vBmB:function(t,e){}});
//# sourceMappingURL=6.0466cc749fe6857039a3.js.map